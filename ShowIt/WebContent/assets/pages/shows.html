<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Shows</title>



    <meta name="viewport" content="width=device-width , initial-scale=1">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="http://www.w3schools.com/lib/w3.css">


    <script>
        $(document).ready(function () {
        	
        	   //Get localstorageu user
        	var username = sessionStorage.getItem("username");
        	
                    
        	$("#uname").html(username);
        	
        	//Logout and clean Local Storage
        	$("#logoutbut").click(function () {
        		localStorage.clear();
        			window.location.href = "index.html";
        	});
        	
    		$("#GetExercicio").click(function () {
    			var category = $("#txtGetExercicio").val();
    			var url = "http://localhost:8080/ShowIt/api/shows/" + category;
        		
        			
        		var jqxhr = $.get(url, function() {
        			  
        		})
    				.done(function (data) {
                	console.log(data);
                    $("#tbl").empty();
                    var trTemp = "";
                    trTemp += "<tr><th colspan='8'>Shows</th></tr>";
                    trTemp += "<tr><th>Name</th><th>Description</th><th>Gender</th><th>Release</th><th>Seasons</th><th>Episodes</th><th>IMDB</th><th>Users Rate</th></tr>";
                    $("#tbl").append(trTemp);

                    $.each(data, function (i, obj) {
                       
                            trTemp = "<tr><td>" + obj.name + "</td><td>" +
                            obj.desc + "</td><td>" +
                            obj.gender + "</td><td>" +
                            obj.release + "</td><td>" +
                            obj.seasons + "</td><td>" +
                            obj.episodes + "</td><td>" +
                            obj.imdb + "</td><td>" +
                            obj.cusers + "</td><tr>";
                            
                            $("#tbl").append(trTemp);
                    });

                })
    				
    			.fail(function (e) {
    				alert("The Show doesnt exists");
    			});
    		});
    		

    		$("#btnTodos").click(function () {
    		
    
        		var url = "http://localhost:8080/ShowIt/api/shows";
        		
        			
        		var jqxhr = $.get(url, function() {
        			  
        		})
        		 .done(function (data) {
                 	console.log(data);
                     $("#tbl").empty();
                     var trTemp = "";
                     trTemp += "<tr><th colspan='8'>All Shows</th></tr>";
                     trTemp += "<tr><th>Name</th><th>Description</th><th>Gender</th><th>Release</th><th>Seasons</th><th>Episodes</th><th>IMDB</th><th>Users Rate</th></tr>";
                    $("#tbl").append(trTemp);

                     $.each(data, function (i, obj) {
                        
                        trTemp = "<tr><td>" + obj.name + "</td><td>" +
                            obj.desc + "</td><td>" +
                            obj.gender + "</td><td>" +
                            obj.release + "</td><td>" +
                            obj.seasons + "</td><td>" +
                            obj.episodes + "</td><td>" +
                            obj.imdb + "</td><td>" +
                            obj.cusers + "</td><tr>";
                       
                             $("#tbl").append(trTemp);
                     });

                 })
                 .fail(function () {
                     alert("error");
                 });
            });
           
        });
        

    </script>

</head>

<body>

    <div class="container">
	

            <div class="row" style="margin-top: 100px">
                <h1>Shows </h1>

            </div>


            <div class="customHr" id="sugest" style="margin-top: 50px">.</div>

            <div class="row">
                <div class="col-md-3">
                    <div class="form-group">
                        <h5>Search Show</h5>
                        <input id='txtGetExercicio' type='text' required='' placeholder='Show' class='form-control'
                            name='GetExercicio'>
                        <button type="button" id="GetExercicio" class="btn btn-sm"> <span class="glyphicon glyphicon-search"></span>Shearch
                        </button>
                        <button type="button" class="btn  btn-sm" id="btnTodos">
                            <span class="glyphicon glyphicon-refresh"></span> Show Alli
                        </button>
                    </div>
                </div>

            </div>

            <div class="row">
                <div class="col-md-12">

                        <table id="tbl" border="1" style="width:100%;font-family: Times New Roman" , Times, serif;">
                        </table>

                </div>
            </div>

</div>
</body>

</html>